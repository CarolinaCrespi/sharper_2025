<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Predittore Prezzo Case — Regressione Lineare</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header centered">
    <button id="btnLang" class="lang-switch">EN</button>
    <h1 id="t_title">La matematica delle case</h1>
  </header>

  <!-- Spiegazione + formula collassabile (si può rimuovere, vedi note) -->
  <section class="top-explain panel">
    <p id="t_explain_text"></p>
    <details class="formula-details">
      <summary id="t_formula_toggle">Formula (apri/chiudi)</summary>
      <div class="formula pretty-math">
        <math display="block">
          <mrow>
            <mi>ŷ</mi><mo>=</mo>
            <msub><mi>w</mi><mn>0</mn></msub>
            <mo>+</mo><msub><mi>w</mi><mi>mq</mi></msub><mo>·</mo><mi>mq</mi>
            <mo>+</mo><msub><mi>w</mi><mi>cam</mi></msub><mo>·</mo><mi>camere</mi>
            <mo>+</mo><msub><mi>w</mi><mi>bag</mi></msub><mo>·</mo><mi>bagni</mi>
            <mo>+</mo><msub><mi>w</mi><mi>piano</mi></msub><mo>·</mo><mi>piano</mi>
            <mo>+</mo><msub><mi>w</mi><mi>prox</mi></msub><mo>·</mo><mi>vicinanza\;metro</mi>
            <mo>+</mo><msub><mi>w</mi><mi>balc</mi></msub><mo>·</mo><mi>[balcone]</mi>
            <mo>+</mo><msub><mi>w</mi><mi>elev</mi></msub><mo>·</mo><mi>[ascensore]</mi>
            <mo>+</mo><msub><mi>w</mi><mi>B</mi></msub><mo>·</mo><mi>[quart=Buono]</mi>
            <mo>+</mo><msub><mi>w</mi><mi>C</mi></msub><mo>·</mo><mi>[quart=Ottimo]</mi>
          </mrow>
        </math>
      </div>
    </details>
  </section>

  <main class="app-grid">
    <!-- Controlli -->
    <section class="panel controls">
      <h2 id="t_controls">Controlli</h2>

      <div class="control">
        <label for="mq"><span id="t_mq">Metri quadri</span>: <span id="mqVal">70</span> m²</label>
        <input id="mq" type="range" min="30" max="150" value="70" step="1">
      </div>

      <div class="control">
        <label for="camere"><span id="t_camere">Camere</span>: <span id="camereVal">3</span></label>
        <input id="camere" type="range" min="1" max="6" value="3" step="1">
      </div>

      <div class="control">
        <label for="bagni"><span id="t_bagni">Bagni</span>: <span id="bagniVal">2</span></label>
        <input id="bagni" type="range" min="1" max="3" value="2" step="1">
      </div>

      <div class="control">
        <label for="piano"><span id="t_piano">Piano</span>: <span id="pianoVal">2</span></label>
        <input id="piano" type="range" min="0" max="10" value="2" step="1">
      </div>

      <div class="control">
        <label for="dist"><span id="t_dist">Vicinanza alla metro</span>: <span id="distVal">600</span> m</label>
        <input id="dist" type="range" min="0" max="2000" value="600" step="25">
      </div>

      <div class="control row">
        <label for="balcone" id="t_balcone">Balcone</label>
        <input id="balcone" type="checkbox" checked>
      </div>

      <div class="control row">
        <label for="ascensore" id="t_ascensore">Ascensore</label>
        <input id="ascensore" type="checkbox">
      </div>

      <div class="control row">
        <label for="quartiere" id="t_quartiere">Quartiere</label>
        <select id="quartiere">
          <option value="A">A — Base</option>
          <option value="B" selected>B — Buono</option>
          <option value="C">C — Ottimo</option>
        </select>
      </div>

      <p class="hint" id="t_quart_explain">
        * A=Base (servizi essenziali), B=Buono (servizi e collegamenti migliori), C=Ottimo (molto richiesto).
      </p>

      <div class="buttons">
        <button id="btnReset">Reset</button>
        <button id="btnRandom">Random</button>
        <button id="btnAddPoint">Aggiungi al grafico</button>
        <button id="btnClearPoints">Pulisci punti</button>
      </div>
    </section>

    <!-- Scatter + tooltip -->
    <section class="panel viz">
      <h2 id="t_scatterTitle">m² vs Prezzo previsto</h2>
      <div class="canvas-wrap" style="position:relative">
        <canvas id="scatter"></canvas>
        <div id="tooltip" class="tooltip hidden"></div>
      </div>
      <div class="legend">
        <span class="dot you"></span> <span id="t_legend_you">tua casa</span>
        <span class="dot saved"></span> <span id="t_legend_saved">case aggiunte</span>
        <span class="line"></span> <span id="t_legend_line">relazione m² → prezzo (altre feature fissate)</span>
      </div>
    </section>

    <!-- Prezzo + barre -->
    <section class="panel metrics">
      <h2 id="t_priceTitle">Prezzo previsto</h2>
      <div id="price" class="price">€ 0</div>
      <h3 id="t_contribTitle">Contribuzioni delle feature</h3>
      <div class="canvas-wrap"><canvas id="bars"></canvas></div>
    </section>
  </main>

  <footer class="footer">
    <small>© Carolina Crespi</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
