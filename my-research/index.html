<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ACO mapping</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet" />
</head>
<body data-theme="reef">
  <noscript style="color:white;background:#c00;padding:8px;display:block;text-align:center">Questo sito richiede JavaScript per funzionare.</noscript>
  <div class="wrap">
    <header class="header">
      <div class="header-row">
        <h1 class="page-title" data-i18n="title">DAL COMPORTAMENTO DELLE FORMICHE AI MODELLI SOCIALI</h1>
        <div class="lang-switch" role="group" aria-label="Language">
          <button class="lang-btn" data-lang="it" aria-pressed="true">ITA</button>
          <button class="lang-btn" data-lang="en" aria-pressed="false">ENG</button>
        </div>
      </div>
      <p class="subtitle"></p>
    </header>

    <section class="layout3">
      <aside class="panel left">
        <section class="sec">
          <h3 data-i18n="sec1_h3">COS‚Äô√à L‚ÄôACO E COME FUNZIONA</h3>

          <p data-i18n-html="sec1_p1">
            L‚ÄôAnt Colony Optimization (ACO) √® un metodo di <b>ottimizzazione</b> ispirato alle <span class="hl">formiche</span>.
            Ogni ‚Äúformica‚Äù lascia <span class="hl">feromone</span> sui cammini; il segnale <span class="hl">evapora</span> con tasso <b>œÅ</b>,
            mantenendo il sistema flessibile. La scelta del prossimo arco <i>i‚Üíj</i> combina due indizi:
            il feromone <b>œÑ</b><sub>ij</sub> (memoria di quanto quel cammino √® stato preferito) e
            la <b>visibilit√†</b> <b>Œ∑</b><sub>ij</sub> = 1/<i>lunghezza</i> (quanto la meta √® vicina), pesati da <b>Œ±</b> e <b>Œ≤</b>.
          </p>

          <p class="mono" style="text-align:center; font-size:15px; margin:6px 0 2px;" data-i18n-html="sec1_formula">
            p<sub>i‚Üíj</sub> ‚àù œÑ<sub>ij</sub><sup>Œ±</sup> ¬∑ Œ∑<sub>ij</sub><sup>Œ≤</sup>
          </p>

          <p data-i18n-html="sec1_p2">
            I cammini percorsi si <b>rinforzano</b> (‚Üë<b>œÑ</b>), gli altri si attenuano per <b>evaporazione</b> (<b>œÅ</b>):
            l‚Äôequilibrio tra memoria ed esplorazione guida verso buoni percorsi su grafi complessi.
            La stessa logica, bilanciare ci√≤ che ‚Äúsi √® imparato‚Äù con ci√≤ che ‚Äúsi vede‚Äù, sostiene il <span class="hl">mapping</span> sociale presentato qui sotto.
          </p>
        </section>

        <section class="sec">
          <div class="mapgrid">
            <div class="map-l" data-i18n-html="map_tau_l"><span class="chip chip-tau">œÑ</span> Feromoni</div>
            <div class="map-r" data-i18n="map_tau_r"><b>Tracce sociali</b>: memoria collettiva dei percorsi gi√† scelti.</div>

            <div class="map-l" data-i18n-html="map_eta_l"><span class="chip chip-eta">Œ∑</span> Visibilit√†</div>
            <div class="map-r" data-i18n="map_eta_r"><b>Desiderabilit√† oggettiva</b>: Œ∑ = 1/lunghezza (pi√π corto = pi√π attraente).</div>

            <div class="map-l" data-i18n-html="map_alpha_l"><span class="chip chip-alpha">Œ±</span> Peso su œÑ</div>
            <div class="map-r" data-i18n="map_alpha_r"><b>Fiducia sociale</b>: quanto seguo le scelte altrui (tracce).</div>

            <div class="map-l" data-i18n-html="map_beta_l"><span class="chip chip-beta">Œ≤</span> Peso su Œ∑</div>
            <div class="map-r" data-i18n="map_beta_r"><b>Fiducia oggettiva</b>: quanto seguo i dati/geometria del percorso.</div>

            <div class="map-l" data-i18n-html="map_rho_l"><span class="chip chip-rho">œÅ</span> Evaporazione</div>
            <div class="map-r" data-i18n="map_rho_r"><b>Oblio</b>: le tracce si affievoliscono se non usate ‚Üí adattamento.</div>
          </div>

          <ol class="bullets">
            <li data-i18n="b1"><b>Rappresentazione</b>: nodi ‚á¢ opzioni/luoghi; archi ‚á¢ scelte possibili.</li>
            <li data-i18n="b2"><b>Trasposizione</b>: interpretazione œÑ, Œ∑, Œ±, Œ≤ come tracce sociali, desiderabilit√†, fiducia sociale/oggettiva.</li>
            <li data-i18n="b3"><b>Memoria dinamica</b>: rinforzo al passaggio (‚ÜëœÑ) e decadimento con œÅ.</li>
            <li data-i18n="b4"><b>Esplorazione</b>: alcuni agenti competitivi <u>danneggiano</u> archi (rallentamento) per rompere l‚Äôeffetto-gregge.</li>
          </ol>
        </section>

        <section class="sec">
          <h3 data-i18n="sec2_h3">DECISIONI COLLETTIVE: UNA NUOVA PROSPETTIVA</h3>
          <p data-i18n-html="sec2_p1">
            Gli agenti pesano insieme <span class="hl">tracce sociali (œÑ)</span> e
            <span class="hl">dati oggettivi (Œ∑)</span>. Le scelte ricorrenti vengono
            <b>rinforzate</b> (‚ÜëœÑ) e diventano pi√π attraenti per gli agenti futuri; al contrario,
            le tracce poco usate <b>svaniscono</b> (œÅ), permettendo al sistema di adattarsi.
            La <b>competizione</b> (se presente) danneggia alcuni archi, spezza l‚Äôeffetto-gregge
            e facilita l‚Äôesplorazione.
          </p>
        </section>
      </aside>

      <main class="panel center">
        <div id="canvasBox">
          <canvas id="stage" width="1600" height="700"></canvas>
          <div class="hud mono" id="hud"></div>
        </div>

        <div class="playbar">
          <button id="btnPause" data-i18n="btn_pause">‚è∏Ô∏è Pausa</button>
          <button id="btnReset" data-i18n="btn_reset">üîÅ Reset</button>
          <button id="btnRegen" data-i18n="btn_regen">üß© Rigenera grafo</button>
        </div>

        <div class="kpi mono" id="kpis">
          <div><span data-i18n="k_done">Run completate:</span> <b id="kDone">0</b></div>
          <div><span data-i18n="k_avg">Lunghezza media (ultimi 20):</span> <b id="kAvg">‚Äî</b></div>
          <div><span data-i18n="k_best">Best trovato:</span> <b id="kBest">‚Äî</b></div>
        </div>
      </main>

      <aside class="panel right">
        <div class="legend-card">
          <ul class="leg">
            <li><span class="sw sw-coop"></span> <b data-i18n="leg_coop_b">Agenti cooperativi</b> <span data-i18n="leg_coop_t">‚Äî rinforzano œÑ</span></li>
            <li><span class="sw sw-comp"></span> <b data-i18n="leg_comp_b">Agenti competitivi</b> <span data-i18n="leg_comp_t">‚Äî danno sull‚Äôarco</span></li>
            <li><span class="sw sw-start"></span> Start &nbsp;&nbsp; <span class="sw sw-goal"></span> Goal</li>
            <li class="edge">
              <span class="edge-bar thin"></span> <span class="edge-label" data-i18n="leg_tau_low">œÑ basso</span>
              <span class="edge-bar thick"></span> <span class="edge-label" data-i18n="leg_tau_high">œÑ alto</span>
            </li>
            <li class="damage">
              <span class="dash"></span>
              <span data-i18n-html="leg_damage"><b>Danno</b> sull‚Äôarco ‚Üí movimento pi√π lento</span>
            </li>
          </ul>
        </div>

        <div class="controls">
          <div class="ctrl">
            <label><span data-i18n="ctrl_alpha_l">fiducia sociale</span> <small id="alphaVal">1.4</small></label>
            <input id="alpha" type="range" min="0" max="3" step="0.1" value="1.4" />
            <div class="mono tiny" data-i18n="ctrl_alpha_h">Peso alle tracce: pi√π alto ‚áí seguo l‚Äôesperienza altrui.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_beta_l">fiducia oggettiva</span> <small id="betaVal">0.9</small></label>
            <input id="beta" type="range" min="0" max="3" step="0.1" value="0.9" />
            <div class="mono tiny" data-i18n="ctrl_beta_h">Peso ai dati del percorso: pi√π alto ‚áí seguo la geometria.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_rho_l">decadimento della traccia</span> <small id="rhoVal">0.10</small></label>
            <input id="rho" type="range" min="0" max="1" step="0.01" value="0.10" />
            <div class="mono tiny" data-i18n="ctrl_rho_h">Velocit√† di evaporazione: pi√π alto ‚áí le tracce svaniscono prima.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_coop_l">Cooperazione (%)</span> <small id="coopVal">85</small></label>
            <input id="coop" type="range" min="0" max="100" step="1" value="85" />
            <div class="mono tiny" data-i18n="ctrl_coop_h">Quota di agenti cooperativi: pi√π alto ‚áí pi√π rinforzo su œÑ.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_comp_l">Intensit√† competizione</span> <small id="compVal">0.40</small></label>
            <input id="comp" type="range" min="0" max="1" step="0.05" value="0.40" />
            <div class="mono tiny" data-i18n="ctrl_comp_h">Aumenta il rallentamento causato dai competitivi.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_ants_l">Agenti</span> <small id="antsVal">40</small></label>
            <input id="ants" type="range" min="1" max="100" step="1" value="40" />
            <div class="mono tiny" data-i18n="ctrl_ants_h">Numero di agenti nella simulazione.</div>
          </div>
          <div class="ctrl">
            <label><span data-i18n="ctrl_speed_l">Velocit√† (px/s)</span> <small id="speedVal">95</small></label>
            <input id="speed" type="range" min="40" max="200" step="1" value="95" />
            <div class="mono tiny" data-i18n="ctrl_speed_h">Velocit√† di movimento degli agenti sul grafo.</div>
          </div>
        </div>
      </aside>
    </section>
  </div>

  <script>
    // Start in IT, but honor saved preference and ?lang=... query
    (function(){
      const params = new URLSearchParams(location.search);
      const q = params.get('lang');
      if(q){ localStorage.setItem('lang', q === 'en' ? 'en' : 'it'); }
      window.INIT_LANG = (localStorage.getItem('lang') || 'it');
    })();
  </script>
  <script src="app.js"></script>
</body>
</html>
